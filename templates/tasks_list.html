<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Liste des tÃ¢ches</title>
</head>
<body>
  <h1>ğŸ“‹ Liste des tÃ¢ches</h1>

  <p>
    <a href="/">ğŸ  Retour Ã  lâ€™accueil</a> |
    <a href="/tasks/add">â• Ajouter une tÃ¢che</a>
  </p>

  <hr>

  {% if tasks|length == 0 %}
    <p><strong>â³ En attente de tÃ¢chesâ€¦</strong></p>
    <p>Tu peux commencer en cliquant ici : <a href="/tasks/add">Ajouter une tÃ¢che</a></p>
  {% else %}
    {% for task in tasks %}
      <div>
        <h3>
          {{ "âœ…" if task["done"] else "â³" }}
          {{ task["title"] }}
        </h3>

        <p>{{ task["description"] }}</p>
        <p><strong>Ã‰chÃ©ance :</strong> {{ task["due_date"] }}</p>

        <!-- Changer statut -->
        <form method="post" action="/tasks/toggle" style="display:inline;">
          <input type="hidden" name="task_id" value="{{ task['id'] }}">
          <button type="submit">
            {{ "Marquer en cours" if task["done"] else "Marquer terminÃ©e" }}
          </button>
        </form>

        <!-- Supprimer -->
        <form method="post" action="/tasks/delete" style="display:inline;">
          <input type="hidden" name="task_id" value="{{ task['id'] }}">
          <button type="submit" onclick="return confirm('Supprimer cette tÃ¢che ?')">
            ğŸ—‘ Supprimer
          </button>
        </form>
      </div>
      <hr>
    {% endfor %}
  {% endif %}
</body>
</html>
